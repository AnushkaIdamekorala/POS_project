a95b29c4dd5d9bede8304efad3ee0187
"use strict";

var _interopRequireWildcard = require("/home/anushkai/Desktop/Training/code/redux/fullStack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/interopRequireWildcard");

var _interopRequireDefault = require("/home/anushkai/Desktop/Training/code/redux/fullStack/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/interopRequireDefault");

var _reduxMockStore = _interopRequireDefault(require("redux-mock-store"));

var _reduxThunk = _interopRequireDefault(require("redux-thunk"));

var actions = _interopRequireWildcard(require("./itemActions"));

var types = _interopRequireWildcard(require("./types"));

var _expect = _interopRequireDefault(require("expect"));

var _regeneratorRuntime = _interopRequireDefault(require("regenerator-runtime"));

var _moxios = _interopRequireDefault(require("moxios"));

const middlewares = [_reduxThunk.default];
const mockStore = (0, _reduxMockStore.default)(middlewares);
describe("getItems itemActions", () => {
  beforeEach(function () {
    _moxios.default.install();
  });
  afterEach(function () {
    _moxios.default.uninstall();
  });
  test("correctly", () => {
    const expectedArray = [{
      _id: "5c6e3f2ccd583f2bd04e55cc",
      itm: {
        _id: "5c67bb90f004c93ecd7006bf",
        name: "Coke",
        productCode: 2,
        price: 100,
        description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec iaculis metus dolor, at mollis ",
        availableCount: 500,
        __v: 0
      },
      count: 1
    }, {
      _id: "5c6e3fbc461b152d009ba691",
      itm: {
        _id: "5c67bd07f004c93ecd7006c6",
        name: "Ice Cream",
        productCode: 9,
        price: 120,
        description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec iaculis metus dolor, at mollis ",
        availableCount: 170,
        __v: 0
      },
      count: 1
    }, {
      _id: "5c6e5d167d83b649d32e3c0c",
      itm: {
        _id: "5c67bbc7f004c93ecd7006c0",
        name: "Apple",
        productCode: 3,
        price: 80,
        description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec iaculis metus dolor, at mollis ",
        availableCount: 600,
        __v: 0
      },
      count: 4
    }, {
      _id: "5c6fce27dedd73364924ed67",
      itm: {
        _id: "5c67bc01f004c93ecd7006c2",
        name: "Milk",
        productCode: 5,
        price: 200,
        description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec iaculis metus dolor, at mollis ",
        availableCount: 400,
        __v: 0
      },
      count: 4
    }, {
      _id: "5c7379de4316081c7de67208",
      itm: {
        _id: "5c67bc28f004c93ecd7006c3",
        name: "Cheese",
        productCode: 6,
        price: 350,
        description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec iaculis metus dolor, at mollis ",
        availableCount: 70,
        __v: 0
      },
      count: 1
    }];

    _moxios.default.wait(() => {
      const request = _moxios.default.requests.mostRecent();

      request.respondWith({
        status: 200,
        response: expectedArray
      });
    });

    const expectedActions = [{
      type: types.ITEMS_LOADING
    }, {
      payload: expectedArray,
      type: types.GET_ITEMS
    }];
    const store = mockStore({
      items: [],
      loading: false
    });
    return store.dispatch(actions.getItems()).then(() => {
      // return of async actions
      (0, _expect.default)(store.getActions()).toEqual(expectedActions);
    });
  });
});
describe("addItem itemActions", () => {
  beforeEach(function () {
    _moxios.default.install();
  });
  afterEach(function () {
    _moxios.default.uninstall();
  });
  test("correctly", () => {
    const expectedArray = [{
      _id: "5c6e3f2ccd583f2bd04e55cc",
      itm: {
        _id: "5c67bb90f004c93ecd7006bf",
        name: "Coke",
        productCode: 2,
        price: 100,
        description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec iaculis metus dolor, at mollis ",
        availableCount: 500,
        __v: 0
      },
      count: 1
    }, {
      _id: "5c6e3fbc461b152d009ba691",
      itm: {
        _id: "5c67bd07f004c93ecd7006c6",
        name: "Ice Cream",
        productCode: 9,
        price: 120,
        description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec iaculis metus dolor, at mollis ",
        availableCount: 170,
        __v: 0
      },
      count: 1
    }, {
      _id: "5c6e5d167d83b649d32e3c0c",
      itm: {
        _id: "5c67bbc7f004c93ecd7006c0",
        name: "Apple",
        productCode: 3,
        price: 80,
        description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec iaculis metus dolor, at mollis ",
        availableCount: 600,
        __v: 0
      },
      count: 4
    }, {
      _id: "5c6fce27dedd73364924ed67",
      itm: {
        _id: "5c67bc01f004c93ecd7006c2",
        name: "Milk",
        productCode: 5,
        price: 200,
        description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec iaculis metus dolor, at mollis ",
        availableCount: 400,
        __v: 0
      },
      count: 4
    }, {
      _id: "5c7379de4316081c7de67208",
      itm: {
        _id: "5c67bc28f004c93ecd7006c3",
        name: "Cheese",
        productCode: 6,
        price: 350,
        description: "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec iaculis metus dolor, at mollis ",
        availableCount: 70,
        __v: 0
      },
      count: 1
    }];

    _moxios.default.wait(() => {
      const request = _moxios.default.requests.mostRecent();

      request.respondWith({
        status: 200,
        response: expectedArray
      });
    });

    const expectedActions = [{
      payload: expectedArray,
      type: types.ADD_ITEM
    }];
    const store = mockStore({
      items: [],
      loading: false
    });
    let item = {
      name: "Tea",
      available: 1000,
      price: 28
    };
    return store.dispatch(actions.addItem(item)).then(() => {
      // return of async actions
      (0, _expect.default)(store.getActions()).toEqual(expectedActions);
    });
  });
});
describe("deleteItem itemActions", () => {
  beforeEach(function () {
    _moxios.default.install();
  });
  afterEach(function () {
    _moxios.default.uninstall();
  });
  test("correctly", () => {
    _moxios.default.wait(() => {
      const request = _moxios.default.requests.mostRecent();

      request.respondWith({
        status: 204
      });
    });

    let id = "345245a5b54f54d4ce";
    const expectedActions = [{
      payload: id,
      type: types.DELETE_ITEM
    }];
    const store = mockStore({
      items: [],
      loading: false
    });
    let item = {
      name: "Tea",
      available: 1000,
      price: 28
    };
    return store.dispatch(actions.deleteItem(id)).then(() => {
      // return of async actions
      (0, _expect.default)(store.getActions()).toEqual(expectedActions);
    });
  });
});
describe("setItemsLoading itemActions", () => {
  beforeEach(function () {
    _moxios.default.install();
  });
  afterEach(function () {
    _moxios.default.uninstall();
  });
  test("correctly", () => {
    _moxios.default.wait(() => {
      const request = _moxios.default.requests.mostRecent();

      const expectedActions = [{
        type: types.ITEMS_LOADING
      }];
      const store = mockStore({
        items: [],
        loading: false
      });
      return store.dispatch(actions.setItemsLoading()).then(() => {
        // return of async actions
        (0, _expect.default)(store.getActions()).toEqual(expectedActions);
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIml0ZW1BY3Rpb25zLnRlc3QuanMiXSwibmFtZXMiOlsibWlkZGxld2FyZXMiLCJ0aHVuayIsIm1vY2tTdG9yZSIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsIm1veGlvcyIsImluc3RhbGwiLCJhZnRlckVhY2giLCJ1bmluc3RhbGwiLCJ0ZXN0IiwiZXhwZWN0ZWRBcnJheSIsIl9pZCIsIml0bSIsIm5hbWUiLCJwcm9kdWN0Q29kZSIsInByaWNlIiwiZGVzY3JpcHRpb24iLCJhdmFpbGFibGVDb3VudCIsIl9fdiIsImNvdW50Iiwid2FpdCIsInJlcXVlc3QiLCJyZXF1ZXN0cyIsIm1vc3RSZWNlbnQiLCJyZXNwb25kV2l0aCIsInN0YXR1cyIsInJlc3BvbnNlIiwiZXhwZWN0ZWRBY3Rpb25zIiwidHlwZSIsInR5cGVzIiwiSVRFTVNfTE9BRElORyIsInBheWxvYWQiLCJHRVRfSVRFTVMiLCJzdG9yZSIsIml0ZW1zIiwibG9hZGluZyIsImRpc3BhdGNoIiwiYWN0aW9ucyIsImdldEl0ZW1zIiwidGhlbiIsImdldEFjdGlvbnMiLCJ0b0VxdWFsIiwiQUREX0lURU0iLCJpdGVtIiwiYXZhaWxhYmxlIiwiYWRkSXRlbSIsImlkIiwiREVMRVRFX0lURU0iLCJkZWxldGVJdGVtIiwic2V0SXRlbXNMb2FkaW5nIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFDQTs7QUFFQSxNQUFNQSxXQUFXLEdBQUcsQ0FBQ0MsbUJBQUQsQ0FBcEI7QUFDQSxNQUFNQyxTQUFTLEdBQUcsNkJBQW1CRixXQUFuQixDQUFsQjtBQUVBRyxRQUFRLENBQUMsc0JBQUQsRUFBeUIsTUFBTTtBQUNyQ0MsRUFBQUEsVUFBVSxDQUFDLFlBQVc7QUFDcEJDLG9CQUFPQyxPQUFQO0FBQ0QsR0FGUyxDQUFWO0FBSUFDLEVBQUFBLFNBQVMsQ0FBQyxZQUFXO0FBQ25CRixvQkFBT0csU0FBUDtBQUNELEdBRlEsQ0FBVDtBQUlBQyxFQUFBQSxJ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QkcsQ0FBSjtBQTJCRCxDQXBDTyxDQUFSO0FBc0NBeEIsUUFBUSxDQUFDLDZCQUFELEVBQWdDLE1BQU07QUFDNUNDLEVBQUFBLFVBQVUsQ0FBQyxZQUFXO0FBQ3BCQyxvQkFBT0MsT0FBUDtBQUNELEdBRlMsQ0FBVjtBQUlBQyxFQUFBQSxTQUFTLENBQUMsWUFBVztBQUNuQkYsb0JBQU9HLFNBQVA7QUFDRCxHQUZRLENBQVQ7QUFJQUMsRUFBQUEsSUFBSSxDQUFDLFdBQUQsRUFBYyxNQUFNO0FBQ3RCSixvQkFBT2UsSUFBUCxDQUFZLE1BQU07QUFDaEIsWUFBTUMsT0FBTyxHQUFHaEIsZ0JBQU9pQixRQUFQLENBQWdCQyxVQUFoQixFQUFoQjs7QUFFQSxZQUFNSSxlQUFlLEdBQUcsQ0FDdEI7QUFDRUMsUUFBQUEsSUFBSSxFQUFFQyxLQUFLLENBQUNDO0FBRGQsT0FEc0IsQ0FBeEI7QUFNQSxZQUFNRyxLQUFLLEdBQUcvQixTQUFTLENBQUM7QUFDdEJnQyxRQUFBQSxLQUFLLEVBQUUsRUFEZTtBQUV0QkMsUUFBQUEsT0FBTyxFQUFFO0FBRmEsT0FBRCxDQUF2QjtBQUlBLGFBQU9GLEtBQUssQ0FBQ0csUUFBTixDQUFlQyxPQUFPLENBQUNZLGVBQVIsRUFBZixFQUEwQ1YsSUFBMUMsQ0FBK0MsTUFBTTtBQUMxRDtBQUNBLDZCQUFPTixLQUFLLENBQUNPLFVBQU4sRUFBUCxFQUEyQkMsT0FBM0IsQ0FBbUNkLGVBQW5DO0FBQ0QsT0FITSxDQUFQO0FBSUQsS0FqQkQ7QUFrQkQsR0FuQkcsQ0FBSjtBQW9CRCxDQTdCTyxDQUFSIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGNvbmZpZ3VyZU1vY2tTdG9yZSBmcm9tIFwicmVkdXgtbW9jay1zdG9yZVwiO1xuaW1wb3J0IHRodW5rIGZyb20gXCJyZWR1eC10aHVua1wiO1xuaW1wb3J0ICogYXMgYWN0aW9ucyBmcm9tIFwiLi9pdGVtQWN0aW9uc1wiO1xuaW1wb3J0ICogYXMgdHlwZXMgZnJvbSBcIi4vdHlwZXNcIjtcbmltcG9ydCBleHBlY3QgZnJvbSBcImV4cGVjdFwiO1xuaW1wb3J0IHJlZ2VuZXJhdG9yUnVudGltZSBmcm9tIFwicmVnZW5lcmF0b3ItcnVudGltZVwiO1xuaW1wb3J0IG1veGlvcyBmcm9tIFwibW94aW9zXCI7XG5cbmNvbnN0IG1pZGRsZXdhcmVzID0gW3RodW5rXTtcbmNvbnN0IG1vY2tTdG9yZSA9IGNvbmZpZ3VyZU1vY2tTdG9yZShtaWRkbGV3YXJlcyk7XG5cbmRlc2NyaWJlKFwiZ2V0SXRlbXMgaXRlbUFjdGlvbnNcIiwgKCkgPT4ge1xuICBiZWZvcmVFYWNoKGZ1bmN0aW9uKCkge1xuICAgIG1veGlvcy5pbnN0YWxsKCk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaChmdW5jdGlvbigpIHtcbiAgICBtb3hpb3MudW5pbnN0YWxsKCk7XG4gIH0pO1xuXG4gIHRlc3QoXCJjb3JyZWN0bHlcIiwgKCkgPT4ge1xuICAgIGNvbnN0IGV4cGVjdGVkQXJyYXkgPSBbXG4gICAgICB7XG4gICAgICAgIF9pZDogXCI1YzZlM2YyY2NkNTgzZjJiZDA0ZTU1Y2NcIixcbiAgICAgICAgaXRtOiB7XG4gICAgICAgICAgX2lkOiBcIjVjNjdiYjkwZjAwNGM5M2VjZDcwMDZiZlwiLFxuICAgICAgICAgIG5hbWU6IFwiQ29rZVwiLFxuICAgICAgICAgIHByb2R1Y3RDb2RlOiAyLFxuICAgICAgICAgIHByaWNlOiAxMDAsXG4gICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICBcIkxvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNjaW5nIGVsaXQuIERvbmVjIGlhY3VsaXMgbWV0dXMgZG9sb3IsIGF0IG1vbGxpcyBcIixcbiAgICAgICAgICBhdmFpbGFibGVDb3VudDogNTAwLFxuICAgICAgICAgIF9fdjogMFxuICAgICAgICB9LFxuICAgICAgICBjb3VudDogMVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgX2lkOiBcIjVjNmUzZmJjNDYxYjE1MmQwMDliYTY5MVwiLFxuICAgICAgICBpdG06IHtcbiAgICAgICAgICBfaWQ6IFwiNWM2N2JkMDdmMDA0YzkzZWNkNzAwNmM2XCIsXG4gICAgICAgICAgbmFtZTogXCJJY2UgQ3JlYW1cIixcbiAgICAgICAgICBwcm9kdWN0Q29kZTogOSxcbiAgICAgICAgICBwcmljZTogMTIwLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgXCJMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dXIgYWRpcGlzY2luZyBlbGl0LiBEb25lYyBpYWN1bGlzIG1ldHVzIGRvbG9yLCBhdCBtb2xsaXMgXCIsXG4gICAgICAgICAgYXZhaWxhYmxlQ291bnQ6IDE3MCxcbiAgICAgICAgICBfX3Y6IDBcbiAgICAgICAgfSxcbiAgICAgICAgY291bnQ6IDFcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIF9pZDogXCI1YzZlNWQxNjdkODNiNjQ5ZDMyZTNjMGNcIixcbiAgICAgICAgaXRtOiB7XG4gICAgICAgICAgX2lkOiBcIjVjNjdiYmM3ZjAwNGM5M2VjZDcwMDZjMFwiLFxuICAgICAgICAgIG5hbWU6IFwiQXBwbGVcIixcbiAgICAgICAgICBwcm9kdWN0Q29kZTogMyxcbiAgICAgICAgICBwcmljZTogODAsXG4gICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICBcIkxvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNjaW5nIGVsaXQuIERvbmVjIGlhY3VsaXMgbWV0dXMgZG9sb3IsIGF0IG1vbGxpcyBcIixcbiAgICAgICAgICBhdmFpbGFibGVDb3VudDogNjAwLFxuICAgICAgICAgIF9fdjogMFxuICAgICAgICB9LFxuICAgICAgICBjb3VudDogNFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgX2lkOiBcIjVjNmZjZTI3ZGVkZDczMzY0OTI0ZWQ2N1wiLFxuICAgICAgICBpdG06IHtcbiAgICAgICAgICBfaWQ6IFwiNWM2N2JjMDFmMDA0YzkzZWNkNzAwNmMyXCIsXG4gICAgICAgICAgbmFtZTogXCJNaWxrXCIsXG4gICAgICAgICAgcHJvZHVjdENvZGU6IDUsXG4gICAgICAgICAgcHJpY2U6IDIwMCxcbiAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAgIFwiTG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyIGFkaXBpc2NpbmcgZWxpdC4gRG9uZWMgaWFjdWxpcyBtZXR1cyBkb2xvciwgYXQgbW9sbGlzIFwiLFxuICAgICAgICAgIGF2YWlsYWJsZUNvdW50OiA0MDAsXG4gICAgICAgICAgX192OiAwXG4gICAgICAgIH0sXG4gICAgICAgIGNvdW50OiA0XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBfaWQ6IFwiNWM3Mzc5ZGU0MzE2MDgxYzdkZTY3MjA4XCIsXG4gICAgICAgIGl0bToge1xuICAgICAgICAgIF9pZDogXCI1YzY3YmMyOGYwMDRjOTNlY2Q3MDA2YzNcIixcbiAgICAgICAgICBuYW1lOiBcIkNoZWVzZVwiLFxuICAgICAgICAgIHByb2R1Y3RDb2RlOiA2LFxuICAgICAgICAgIHByaWNlOiAzNTAsXG4gICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICBcIkxvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNjaW5nIGVsaXQuIERvbmVjIGlhY3VsaXMgbWV0dXMgZG9sb3IsIGF0IG1vbGxpcyBcIixcbiAgICAgICAgICBhdmFpbGFibGVDb3VudDogNzAsXG4gICAgICAgICAgX192OiAwXG4gICAgICAgIH0sXG4gICAgICAgIGNvdW50OiAxXG4gICAgICB9XG4gICAgXTtcblxuICAgIG1veGlvcy53YWl0KCgpID0+IHtcbiAgICAgIGNvbnN0IHJlcXVlc3QgPSBtb3hpb3MucmVxdWVzdHMubW9zdFJlY2VudCgpO1xuICAgICAgcmVxdWVzdC5yZXNwb25kV2l0aCh7XG4gICAgICAgIHN0YXR1czogMjAwLFxuICAgICAgICByZXNwb25zZTogZXhwZWN0ZWRBcnJheVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBleHBlY3RlZEFjdGlvbnMgPSBbXG4gICAgICB7IHR5cGU6IHR5cGVzLklURU1TX0xPQURJTkcgfSxcbiAgICAgIHtcbiAgICAgICAgcGF5bG9hZDogZXhwZWN0ZWRBcnJheSxcbiAgICAgICAgdHlwZTogdHlwZXMuR0VUX0lURU1TXG4gICAgICB9XG4gICAgXTtcblxuICAgIGNvbnN0IHN0b3JlID0gbW9ja1N0b3JlKHtcbiAgICAgIGl0ZW1zOiBbXSxcbiAgICAgIGxvYWRpbmc6IGZhbHNlXG4gICAgfSk7XG5cbiAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goYWN0aW9ucy5nZXRJdGVtcygpKS50aGVuKCgpID0+IHtcbiAgICAgIC8vIHJldHVybiBvZiBhc3luYyBhY3Rpb25zXG4gICAgICBleHBlY3Qoc3RvcmUuZ2V0QWN0aW9ucygpKS50b0VxdWFsKGV4cGVjdGVkQWN0aW9ucyk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKFwiYWRkSXRlbSBpdGVtQWN0aW9uc1wiLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKSB7XG4gICAgbW94aW9zLmluc3RhbGwoKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCkge1xuICAgIG1veGlvcy51bmluc3RhbGwoKTtcbiAgfSk7XG5cbiAgdGVzdChcImNvcnJlY3RseVwiLCAoKSA9PiB7XG4gICAgY29uc3QgZXhwZWN0ZWRBcnJheSA9IFtcbiAgICAgIHtcbiAgICAgICAgX2lkOiBcIjVjNmUzZjJjY2Q1ODNmMmJkMDRlNTVjY1wiLFxuICAgICAgICBpdG06IHtcbiAgICAgICAgICBfaWQ6IFwiNWM2N2JiOTBmMDA0YzkzZWNkNzAwNmJmXCIsXG4gICAgICAgICAgbmFtZTogXCJDb2tlXCIsXG4gICAgICAgICAgcHJvZHVjdENvZGU6IDIsXG4gICAgICAgICAgcHJpY2U6IDEwMCxcbiAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAgIFwiTG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyIGFkaXBpc2NpbmcgZWxpdC4gRG9uZWMgaWFjdWxpcyBtZXR1cyBkb2xvciwgYXQgbW9sbGlzIFwiLFxuICAgICAgICAgIGF2YWlsYWJsZUNvdW50OiA1MDAsXG4gICAgICAgICAgX192OiAwXG4gICAgICAgIH0sXG4gICAgICAgIGNvdW50OiAxXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBfaWQ6IFwiNWM2ZTNmYmM0NjFiMTUyZDAwOWJhNjkxXCIsXG4gICAgICAgIGl0bToge1xuICAgICAgICAgIF9pZDogXCI1YzY3YmQwN2YwMDRjOTNlY2Q3MDA2YzZcIixcbiAgICAgICAgICBuYW1lOiBcIkljZSBDcmVhbVwiLFxuICAgICAgICAgIHByb2R1Y3RDb2RlOiA5LFxuICAgICAgICAgIHByaWNlOiAxMjAsXG4gICAgICAgICAgZGVzY3JpcHRpb246XG4gICAgICAgICAgICBcIkxvcmVtIGlwc3VtIGRvbG9yIHNpdCBhbWV0LCBjb25zZWN0ZXR1ciBhZGlwaXNjaW5nIGVsaXQuIERvbmVjIGlhY3VsaXMgbWV0dXMgZG9sb3IsIGF0IG1vbGxpcyBcIixcbiAgICAgICAgICBhdmFpbGFibGVDb3VudDogMTcwLFxuICAgICAgICAgIF9fdjogMFxuICAgICAgICB9LFxuICAgICAgICBjb3VudDogMVxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgX2lkOiBcIjVjNmU1ZDE2N2Q4M2I2NDlkMzJlM2MwY1wiLFxuICAgICAgICBpdG06IHtcbiAgICAgICAgICBfaWQ6IFwiNWM2N2JiYzdmMDA0YzkzZWNkNzAwNmMwXCIsXG4gICAgICAgICAgbmFtZTogXCJBcHBsZVwiLFxuICAgICAgICAgIHByb2R1Y3RDb2RlOiAzLFxuICAgICAgICAgIHByaWNlOiA4MCxcbiAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAgIFwiTG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyIGFkaXBpc2NpbmcgZWxpdC4gRG9uZWMgaWFjdWxpcyBtZXR1cyBkb2xvciwgYXQgbW9sbGlzIFwiLFxuICAgICAgICAgIGF2YWlsYWJsZUNvdW50OiA2MDAsXG4gICAgICAgICAgX192OiAwXG4gICAgICAgIH0sXG4gICAgICAgIGNvdW50OiA0XG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBfaWQ6IFwiNWM2ZmNlMjdkZWRkNzMzNjQ5MjRlZDY3XCIsXG4gICAgICAgIGl0bToge1xuICAgICAgICAgIF9pZDogXCI1YzY3YmMwMWYwMDRjOTNlY2Q3MDA2YzJcIixcbiAgICAgICAgICBuYW1lOiBcIk1pbGtcIixcbiAgICAgICAgICBwcm9kdWN0Q29kZTogNSxcbiAgICAgICAgICBwcmljZTogMjAwLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOlxuICAgICAgICAgICAgXCJMb3JlbSBpcHN1bSBkb2xvciBzaXQgYW1ldCwgY29uc2VjdGV0dXIgYWRpcGlzY2luZyBlbGl0LiBEb25lYyBpYWN1bGlzIG1ldHVzIGRvbG9yLCBhdCBtb2xsaXMgXCIsXG4gICAgICAgICAgYXZhaWxhYmxlQ291bnQ6IDQwMCxcbiAgICAgICAgICBfX3Y6IDBcbiAgICAgICAgfSxcbiAgICAgICAgY291bnQ6IDRcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIF9pZDogXCI1YzczNzlkZTQzMTYwODFjN2RlNjcyMDhcIixcbiAgICAgICAgaXRtOiB7XG4gICAgICAgICAgX2lkOiBcIjVjNjdiYzI4ZjAwNGM5M2VjZDcwMDZjM1wiLFxuICAgICAgICAgIG5hbWU6IFwiQ2hlZXNlXCIsXG4gICAgICAgICAgcHJvZHVjdENvZGU6IDYsXG4gICAgICAgICAgcHJpY2U6IDM1MCxcbiAgICAgICAgICBkZXNjcmlwdGlvbjpcbiAgICAgICAgICAgIFwiTG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyIGFkaXBpc2NpbmcgZWxpdC4gRG9uZWMgaWFjdWxpcyBtZXR1cyBkb2xvciwgYXQgbW9sbGlzIFwiLFxuICAgICAgICAgIGF2YWlsYWJsZUNvdW50OiA3MCxcbiAgICAgICAgICBfX3Y6IDBcbiAgICAgICAgfSxcbiAgICAgICAgY291bnQ6IDFcbiAgICAgIH1cbiAgICBdO1xuXG4gICAgbW94aW9zLndhaXQoKCkgPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdCA9IG1veGlvcy5yZXF1ZXN0cy5tb3N0UmVjZW50KCk7XG4gICAgICByZXF1ZXN0LnJlc3BvbmRXaXRoKHtcbiAgICAgICAgc3RhdHVzOiAyMDAsXG4gICAgICAgIHJlc3BvbnNlOiBleHBlY3RlZEFycmF5XG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGV4cGVjdGVkQWN0aW9ucyA9IFtcbiAgICAgIHtcbiAgICAgICAgcGF5bG9hZDogZXhwZWN0ZWRBcnJheSxcbiAgICAgICAgdHlwZTogdHlwZXMuQUREX0lURU1cbiAgICAgIH1cbiAgICBdO1xuXG4gICAgY29uc3Qgc3RvcmUgPSBtb2NrU3RvcmUoe1xuICAgICAgaXRlbXM6IFtdLFxuICAgICAgbG9hZGluZzogZmFsc2VcbiAgICB9KTtcbiAgICBsZXQgaXRlbSA9IHsgbmFtZTogXCJUZWFcIiwgYXZhaWxhYmxlOiAxMDAwLCBwcmljZTogMjggfTtcblxuICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaChhY3Rpb25zLmFkZEl0ZW0oaXRlbSkpLnRoZW4oKCkgPT4ge1xuICAgICAgLy8gcmV0dXJuIG9mIGFzeW5jIGFjdGlvbnNcbiAgICAgIGV4cGVjdChzdG9yZS5nZXRBY3Rpb25zKCkpLnRvRXF1YWwoZXhwZWN0ZWRBY3Rpb25zKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoXCJkZWxldGVJdGVtIGl0ZW1BY3Rpb25zXCIsICgpID0+IHtcbiAgYmVmb3JlRWFjaChmdW5jdGlvbigpIHtcbiAgICBtb3hpb3MuaW5zdGFsbCgpO1xuICB9KTtcblxuICBhZnRlckVhY2goZnVuY3Rpb24oKSB7XG4gICAgbW94aW9zLnVuaW5zdGFsbCgpO1xuICB9KTtcblxuICB0ZXN0KFwiY29ycmVjdGx5XCIsICgpID0+IHtcbiAgICBtb3hpb3Mud2FpdCgoKSA9PiB7XG4gICAgICBjb25zdCByZXF1ZXN0ID0gbW94aW9zLnJlcXVlc3RzLm1vc3RSZWNlbnQoKTtcbiAgICAgIHJlcXVlc3QucmVzcG9uZFdpdGgoe1xuICAgICAgICBzdGF0dXM6IDIwNFxuICAgICAgfSk7XG4gICAgfSk7XG4gICAgbGV0IGlkID0gXCIzNDUyNDVhNWI1NGY1NGQ0Y2VcIjtcblxuICAgIGNvbnN0IGV4cGVjdGVkQWN0aW9ucyA9IFtcbiAgICAgIHtcbiAgICAgICAgcGF5bG9hZDogaWQsXG4gICAgICAgIHR5cGU6IHR5cGVzLkRFTEVURV9JVEVNXG4gICAgICB9XG4gICAgXTtcblxuICAgIGNvbnN0IHN0b3JlID0gbW9ja1N0b3JlKHtcbiAgICAgIGl0ZW1zOiBbXSxcbiAgICAgIGxvYWRpbmc6IGZhbHNlXG4gICAgfSk7XG4gICAgbGV0IGl0ZW0gPSB7IG5hbWU6IFwiVGVhXCIsIGF2YWlsYWJsZTogMTAwMCwgcHJpY2U6IDI4IH07XG5cbiAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goYWN0aW9ucy5kZWxldGVJdGVtKGlkKSkudGhlbigoKSA9PiB7XG4gICAgICAvLyByZXR1cm4gb2YgYXN5bmMgYWN0aW9uc1xuICAgICAgZXhwZWN0KHN0b3JlLmdldEFjdGlvbnMoKSkudG9FcXVhbChleHBlY3RlZEFjdGlvbnMpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuXG5kZXNjcmliZShcInNldEl0ZW1zTG9hZGluZyBpdGVtQWN0aW9uc1wiLCAoKSA9PiB7XG4gIGJlZm9yZUVhY2goZnVuY3Rpb24oKSB7XG4gICAgbW94aW9zLmluc3RhbGwoKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKGZ1bmN0aW9uKCkge1xuICAgIG1veGlvcy51bmluc3RhbGwoKTtcbiAgfSk7XG5cbiAgdGVzdChcImNvcnJlY3RseVwiLCAoKSA9PiB7XG4gICAgbW94aW9zLndhaXQoKCkgPT4ge1xuICAgICAgY29uc3QgcmVxdWVzdCA9IG1veGlvcy5yZXF1ZXN0cy5tb3N0UmVjZW50KCk7XG5cbiAgICAgIGNvbnN0IGV4cGVjdGVkQWN0aW9ucyA9IFtcbiAgICAgICAge1xuICAgICAgICAgIHR5cGU6IHR5cGVzLklURU1TX0xPQURJTkdcbiAgICAgICAgfVxuICAgICAgXTtcblxuICAgICAgY29uc3Qgc3RvcmUgPSBtb2NrU3RvcmUoe1xuICAgICAgICBpdGVtczogW10sXG4gICAgICAgIGxvYWRpbmc6IGZhbHNlXG4gICAgICB9KTtcbiAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaChhY3Rpb25zLnNldEl0ZW1zTG9hZGluZygpKS50aGVuKCgpID0+IHtcbiAgICAgICAgLy8gcmV0dXJuIG9mIGFzeW5jIGFjdGlvbnNcbiAgICAgICAgZXhwZWN0KHN0b3JlLmdldEFjdGlvbnMoKSkudG9FcXVhbChleHBlY3RlZEFjdGlvbnMpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXX0=